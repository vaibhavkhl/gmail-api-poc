"use strict";angular.module("gmailAppApp",["ngResource","ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]),angular.module("gmailAppApp").controller("MainCtrl",["$scope","$q",function(a,b){function c(){gapi.auth.authorize({client_id:i,scope:j,immediate:!0},d)}function d(b){b&&!b.error?(console.log("authorized"),a.isAuthorized=!0,e()):(console.log("not authorized"),a.isAuthorized=!1,a.$apply())}function e(){gapi.client.load("gmail","v1",f)}function f(){console.log("loading data"),g()}function g(){var b=gapi.client.gmail.users.labels.list({userId:"me"});b.execute(function(b){a.labels=b.labels,a.$apply()})}function h(b){a.messages.length=0,_.each(b,function(b){gapi.client.gmail.users.messages.get({userId:"me",id:b.id}).then(function(b){a.messages.push(b),a.$apply()})})}var i="1042316795013-09puaanar8ickpkeq1cnlnp7m3il9p16.apps.googleusercontent.com",j=["https://www.googleapis.com/auth/gmail.readonly"];a.isAuthorized=!0,a.messages=[],a.authorize=function(){return gapi.auth.authorize({client_id:i,scope:j,immediate:!1},d),!1},c(),a.getMsgsForLabel=function(b){var c=gapi.client.gmail.users.messages.list({userId:"me",labelIds:b});c.execute(function(b){a.msgCount=b.resultSizeEstimate,h(b.messages)})}}]),angular.module("gmailAppApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("gmailAppApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/main.html",'<div ng-show="!isAuthorized"> <span>Authorize access to Gmail API</span> <!--Button for the user to click to initiate auth sequence --> <button ng-click="authorize()" class="btn"> Authorize </button> </div> <div class="row label-panel"> <div class="col-md-4"> <h3>Labels:</h3> <li ng-repeat="label in labels" ng-click="getMsgsForLabel(label.id)">{{label.name}}</li> </div> <div class="col-md-8 msgs-panel"> <h3>Messages({{msgCount}}) Snippets: </h3> <li ng-repeat="m in messages">{{m.result.snippet}}</li> </div> </div>')}]);